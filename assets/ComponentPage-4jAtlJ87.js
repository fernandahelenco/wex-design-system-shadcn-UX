import{j as e,i as W,c as z,L as D,o as N,X as g,C as b,r as f,H as R,J as P}from"./index-Cn8sFiMG.js";import{C as w}from"./circle-question-mark-CZFVwIVl.js";import{T as h}from"./triangle-alert-BLOEODsl.js";import{S as F,M as I}from"./sun-a1c3GwXY.js";import{C as U,g as q}from"./contrast-1QdVzTcJ.js";import{E as H}from"./eye-TaJ9uD1g.js";import{F as J}from"./flask-conical-D3FUzbkV.js";function Q({status:s}){return e.jsx("span",{className:W("inline-flex items-center px-1.5 py-0.5 text-[10px] font-medium uppercase tracking-wide rounded",s==="stable"&&"bg-primary/10 text-primary",s==="beta"&&"bg-accent text-accent-foreground",s==="alpha"&&"bg-muted text-muted-foreground"),children:s})}function k(s){if(s==="_meta")return null;const a=z[s];return!a||typeof a!="object"?null:a}function X(s){const t=k(s);if(!t?.modes)return[];const a=t.modes.light?.examples||{},n=t.modes.dark?.examples||{},r=new Set([...Object.keys(a),...Object.keys(n)]);return Array.from(r).map(l=>({exampleId:l,light:a[l]??null,dark:n[l]??null}))}function G({registryKey:s,linkToDashboard:t=!0}){const a=k(s);return a?e.jsx(Z,{compliance:a,registryKey:s,linkToDashboard:t}):e.jsx(Y,{registryKey:s,linkToDashboard:t})}function Y({registryKey:s,linkToDashboard:t}){const a=e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium tracking-wide rounded border border-border bg-muted text-muted-foreground ${t?"cursor-pointer":""}`,children:[e.jsx(w,{className:"h-3 w-3"}),"A11y: Not tested"]});return t?e.jsx(D,{to:`/accessibility?component=${s}`,className:"rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:a}):a}function Z({compliance:s,registryKey:t,linkToDashboard:a}){const{status:n,levelAchieved:r,testedAt:l,subject:m,examplesFound:i,scope:p,modes:u}=s,c=se(n,r,a),d=l?new Date(l).toLocaleDateString():"Never",o=e.jsxs("span",{className:c.className,children:[c.icon,c.label]}),j=a?e.jsx(D,{to:`/accessibility?component=${t}`,className:"rounded focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:o}):o;return e.jsx(N.Provider,{children:e.jsxs(N,{children:[e.jsx(N.Trigger,{asChild:!0,children:j}),e.jsx(N.Content,{side:"bottom",align:"start",className:"max-w-sm",children:e.jsx(K,{subject:m,status:n,testedDate:d,levelAchieved:r,examplesFound:i,scope:p,linkToDashboard:a,modes:u})})]})})}function K({subject:s,status:t,testedDate:a,levelAchieved:n,examplesFound:r,scope:l,linkToDashboard:m,modes:i}){const p=t==="no_examples",u=i&&(i.light||i.dark);return e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("p",{className:"font-semibold",children:"Accessibility Test Signal"}),e.jsx("p",{className:"opacity-70",children:p?"No component examples found on this page. Check that ExampleCard components have data-testid attributes.":"Automated axe-core results for component examples. Tests run in both light and dark modes. This is a test signal, not a compliance certification."}),u&&!p&&e.jsxs("div",{className:"border-t border-wex-tooltip-fg/20 pt-2 space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Mode Results:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i?.light&&e.jsx(E,{mode:"light",result:i.light}),i?.dark&&e.jsx(E,{mode:"dark",result:i.dark})]})]}),e.jsxs("div",{className:"border-t border-wex-tooltip-fg/20 pt-2 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Subject:"})," ",s]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Scope:"})," ",l]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Examples found:"})," ",r]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Combined status:"})," ",t]}),n&&e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Level:"})," ",n," (based on automated ruleset)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-70",children:"Last tested:"})," ",a]})]}),m&&e.jsx("p",{className:"opacity-50 text-[10px] pt-1 border-t border-wex-tooltip-fg/20",children:"Click badge for full details"})]})}function E({mode:s,result:t}){const a=ee(t.status),n=t.status.replace("_"," ");return e.jsxs("div",{className:"flex items-center gap-1.5 p-1.5 rounded bg-wex-tooltip-fg/10",children:[s==="light"?e.jsx(F,{className:"h-3 w-3 opacity-70"}):e.jsx(I,{className:"h-3 w-3 opacity-70"}),e.jsxs("span",{className:"capitalize opacity-70",children:[s,":"]}),a,e.jsx("span",{className:"capitalize",children:n}),e.jsxs("span",{className:"opacity-70",children:["(",t.violations,")"]})]})}function ee(s){switch(s){case"pass":return e.jsx(b,{className:"h-3 w-3 text-green-400"});case"partial":return e.jsx(h,{className:"h-3 w-3 text-amber-400"});case"fail":return e.jsx(g,{className:"h-3 w-3 text-red-400"});case"no_examples":return e.jsx(h,{className:"h-3 w-3 text-amber-400"});default:return e.jsx(w,{className:"h-3 w-3 opacity-70"})}}function se(s,t,a){const r=`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium tracking-wide rounded border ${a?"cursor-pointer":"cursor-help"}`;switch(s){case"pass":return{label:`A11y: Pass${t?` (${t})`:""}`,className:`${r} border-success/50 bg-success/10 text-success`,icon:e.jsx(b,{className:"h-3 w-3"})};case"partial":return{label:`A11y: Partial${t?` (${t})`:""}`,className:`${r} border-warning/50 bg-warning/10 text-warning`,icon:e.jsx(h,{className:"h-3 w-3"})};case"fail":return{label:"A11y: Fail",className:`${r} border-destructive/50 bg-destructive/10 text-destructive`,icon:e.jsx(g,{className:"h-3 w-3"})};case"no_examples":return{label:"A11y: No Examples",className:`${r} border-warning/50 bg-warning/10 text-warning`,icon:e.jsx(h,{className:"h-3 w-3"})};default:return{label:"A11y: Pending",className:`${r} border-border bg-muted text-muted-foreground`,icon:e.jsx(w,{className:"h-3 w-3"})}}}function te(s){const[t,a]=f.useState([]),n=f.useMemo(()=>U.filter(c=>c.registryKey===s),[s]),r=f.useCallback(()=>{const c=[];for(const d of n){const o=q(d.foreground,d.background);o&&c.push({pair:d,ratio:o.ratio,rating:o.rating,passes:o.rating!=="Fail"})}a(c)},[n]);f.useEffect(()=>{if(typeof window>"u")return;r();const c=new MutationObserver(()=>{requestAnimationFrame(r)});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["style","class"]}),c.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>{c.disconnect()}},[r]);const l=t.filter(c=>c.passes).length,m=t.filter(c=>!c.passes).length,i=t.length,p=m===0&&i>0,u=t.length>0?t.reduce((c,d)=>d.ratio<c.ratio?d:c,t[0]):null;return{results:t,passCount:l,failCount:m,totalCount:i,allPass:p,lowestRatio:u?.ratio??null,lowestRating:u?.rating??null}}function T(s){return`${s.toFixed(1)}:1`}function ae({registryKey:s}){const t=k(s);return t?e.jsx(re,{compliance:t,registryKey:s}):e.jsx(ne,{})}function ne(){return e.jsxs("section",{className:"rounded-lg border border-border bg-card p-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Accessibility"}),e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium tracking-wide rounded border border-border bg-muted text-muted-foreground",children:"Not Tested"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No accessibility test results available for this component."}),e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded p-2 font-mono",children:"npm run test:a11y"})]})}function re({compliance:s,registryKey:t}){const{status:a,violations:n,issues:r,testedAt:l,modes:m}=s,[i,p]=f.useState(!1),[u,c]=f.useState(!1),d=X(t),o=te(t),j=ue(a),v=m?.light?.status==="pass",C=m?.dark?.status==="pass",L=r.includes("color-contrast"),B=r.some(x=>x.includes("aria")||x.includes("label")||x.includes("role")||x.includes("name")),M=!L&&o.allPass,_=!B,O=d.length,V=d.filter(x=>x.light?.status==="pass"&&x.dark?.status==="pass").length,A=d.length>0,S=o.totalCount>0,$=l?new Date(l).toLocaleDateString():null;return e.jsxs("section",{className:"rounded-lg border border-border bg-card overflow-hidden mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border-b border-border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Accessibility"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded ${j.badgeClass}`,children:[j.icon,j.label]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] rounded ${v?"bg-wex-text-success/10 text-wex-text-success":"bg-wex-text-destructive/10 text-wex-text-destructive"}`,title:v?"Light mode passes":"Light mode has issues",children:[e.jsx(F,{className:"h-3 w-3"}),v?"✓":"✗"]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] rounded ${C?"bg-wex-text-success/10 text-wex-text-success":"bg-wex-text-destructive/10 text-wex-text-destructive"}`,title:C?"Dark mode passes":"Dark mode has issues",children:[e.jsx(I,{className:"h-3 w-3"}),C?"✓":"✗"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ie,{passed:M,pairCount:o.totalCount,lowestRatio:o.lowestRatio,lowestRating:o.lowestRating}),e.jsx(ce,{passed:_,label:"ARIA"})]}),e.jsx("div",{className:"text-sm",children:(n??0)>0?e.jsxs("span",{className:"text-wex-text-destructive font-medium",children:[n," violation",n!==1?"s":""]}):e.jsx("span",{className:"text-wex-text-success font-medium",children:"No violations"})})]}),S&&e.jsxs("button",{onClick:()=>c(!u),className:"w-full flex items-center justify-between p-3 text-xs text-muted-foreground hover:bg-muted/50 transition-colors border-b border-border",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(H,{className:"h-3.5 w-3.5"}),"Contrast details (",o.passCount,"/",o.totalCount," pairs pass)"]}),u?e.jsx(R,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})]}),u&&S&&e.jsx("div",{className:"px-3 py-2 border-b border-border bg-muted/20",children:e.jsx("div",{className:"space-y-1.5",children:o.results.map((x,y)=>e.jsx(oe,{result:x},y))})}),A&&e.jsxs("button",{onClick:()=>p(!i),className:"w-full flex items-center justify-between p-3 text-xs text-muted-foreground hover:bg-muted/50 transition-colors",children:[e.jsxs("span",{children:["Show variant details (",V,"/",O," pass)"]}),i?e.jsx(R,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})]}),i&&A&&e.jsx("div",{className:"px-3 pb-3 flex flex-wrap gap-2 border-t border-border pt-3",children:d.map(x=>{const y=x.light?.status==="pass"&&x.dark?.status==="pass";return e.jsx(xe,{name:de(x.exampleId),passed:y},x.exampleId)})}),$&&e.jsxs("div",{className:"px-3 py-2 bg-muted/30 border-t border-border text-[10px] text-muted-foreground flex items-center gap-1.5",children:[e.jsx(J,{className:"h-3 w-3"}),"Last tested: ",$]})]})}function ce({passed:s,label:t}){return e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-sm ${s?"text-wex-text-success":"text-wex-text-destructive"}`,children:[s?e.jsx(b,{className:"h-4 w-4"}):e.jsx(g,{className:"h-4 w-4"}),t]})}function ie({passed:s,pairCount:t,lowestRatio:a,lowestRating:n}){return t===0?e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(w,{className:"h-4 w-4"}),"Contrast"]}):e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-sm ${s?"text-wex-text-success":"text-wex-text-destructive"}`,children:[s?e.jsx(b,{className:"h-4 w-4"}):e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:"Contrast"}),a!==null&&e.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:["(min: ",T(a)," ",n,")"]})]})}function oe({result:s}){const{pair:t,ratio:a,rating:n,passes:r}=s,l=le(n);return e.jsxs("div",{className:"flex items-center justify-between text-xs py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(b,{className:"h-3 w-3 text-wex-text-success"}):e.jsx(g,{className:"h-3 w-3 text-wex-text-destructive"}),e.jsx("span",{className:r?"text-foreground":"text-wex-text-destructive",children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-mono ${r?"text-muted-foreground":"text-wex-text-destructive"}`,children:T(a)}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${l}`,children:n})]})]})}function le(s){switch(s){case"AAA":return"bg-wex-text-success/10 text-wex-text-success";case"AA":return"bg-wex-text-success/10 text-wex-text-success";case"AA-large":return"bg-wex-text-warning/10 text-wex-text-warning";case"Fail":return"bg-wex-text-destructive/10 text-wex-text-destructive";default:return"bg-muted text-muted-foreground"}}function xe({name:s,passed:t}){return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full ${t?"bg-wex-text-success/10 text-wex-text-success":"bg-wex-text-destructive/10 text-wex-text-destructive"}`,children:[t?e.jsx(b,{className:"h-3 w-3"}):e.jsx(g,{className:"h-3 w-3"}),s]})}function de(s){return s.startsWith("example-")?`Example ${parseInt(s.replace("example-",""),10)+1}`:s.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function ue(s){switch(s){case"pass":return{label:"Pass",icon:e.jsx(b,{className:"h-3.5 w-3.5"}),badgeClass:"border border-wex-text-success/50 bg-wex-text-success/10 text-wex-text-success"};case"partial":return{label:"Partial",icon:e.jsx(h,{className:"h-3.5 w-3.5"}),badgeClass:"border border-wex-text-warning/50 bg-wex-text-warning/10 text-wex-text-warning"};case"fail":return{label:"Fail",icon:e.jsx(g,{className:"h-3.5 w-3.5"}),badgeClass:"border border-wex-text-destructive/50 bg-wex-text-destructive/10 text-wex-text-destructive"};case"no_examples":return{label:"No Examples",icon:e.jsx(h,{className:"h-3.5 w-3.5"}),badgeClass:"border border-wex-text-warning/50 bg-wex-text-warning/10 text-wex-text-warning"};default:return{label:"Pending",icon:e.jsx(w,{className:"h-3.5 w-3.5"}),badgeClass:"border border-border bg-muted text-muted-foreground"}}}function we({title:s,description:t,status:a,registryKey:n,children:r}){return e.jsxs("article",{children:[e.jsxs("header",{className:"mb-8 pb-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:s}),e.jsx(Q,{status:a}),e.jsx(G,{registryKey:n})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:t})]}),e.jsx(ae,{registryKey:n}),e.jsx("div",{className:"space-y-12",children:r})]})}export{we as C};
