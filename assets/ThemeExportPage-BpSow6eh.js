import{r as g,j as a,W as N,C,s as U,m as $}from"./index-Cn8sFiMG.js";import{u as J,P as E,N as v,b as T,S as k,a as y,p as L,f as R}from"./tokenRegistry-Bkza3qqB.js";import{C as V}from"./copy-DS-cg9Wc.js";import{D as O}from"./download-hyjj9N1G.js";function A({cssCode:h,jsonCode:n,onExportCSS:r,onExportJSON:u}){const[o,d]=g.useState(!1),[e,t]=g.useState(!1),s=g.useCallback(async()=>{try{await navigator.clipboard.writeText(h),d(!0),setTimeout(()=>d(!1),2e3)}catch(c){console.error("Failed to copy CSS:",c)}},[h]),l=g.useCallback(async()=>{try{await navigator.clipboard.writeText(n),t(!0),setTimeout(()=>t(!1),2e3)}catch(c){console.error("Failed to copy JSON:",c)}},[n]);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Export Theme"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Copy or download your theme overrides in CSS or JSON format."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border border-border bg-card overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium",children:"CSS"}),a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",h.split(`
`).length," lines)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{variant:"ghost",size:"sm",onClick:s,className:"h-7 px-2",children:o?a.jsx(C,{className:"h-3 w-3 text-success"}):a.jsx(V,{className:"h-3 w-3"})}),r&&a.jsx(N,{variant:"ghost",size:"sm",onClick:r,className:"h-7 px-2",children:a.jsx(O,{className:"h-3 w-3"})})]})]}),a.jsx("div",{className:"p-4 overflow-x-auto",children:a.jsx("pre",{className:"text-xs font-mono text-foreground whitespace-pre",children:a.jsx("code",{children:h})})})]}),a.jsxs("div",{className:"rounded-lg border border-border bg-card overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium",children:"JSON"}),a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",n.split(`
`).length," lines)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{variant:"ghost",size:"sm",onClick:l,className:"h-7 px-2",children:e?a.jsx(C,{className:"h-3 w-3 text-success"}):a.jsx(V,{className:"h-3 w-3"})}),u&&a.jsx(N,{variant:"ghost",size:"sm",onClick:u,className:"h-7 px-2",children:a.jsx(O,{className:"h-3 w-3"})})]})]}),a.jsx("div",{className:"p-4 overflow-x-auto",children:a.jsx("pre",{className:"text-xs font-mono text-foreground whitespace-pre",children:a.jsx("code",{children:n})})})]})]})]})}const S={50:97,100:93,200:85,300:72,400:56,500:45,600:38,700:32,800:26,900:20};function P(h){let n=`:root {
`;const r=(e,t,s)=>h[s][e]||t,u=(e,t,s,l)=>{const c={},m=`--wex-palette-${e}-500`,x=h[l][m];let f=t,j=s,b=S[500];if(x){const i=L(x);i&&(f=i.h,j=i.s,b=i.l)}return[50,100,200,300,400,500,600,700,800,900].forEach(i=>{const p=`--wex-palette-${e}-${i}`;if(h[l][p])c[p]=h[l][p];else{const w=i===500?b:S[i];c[p]=R({h:f,s:j,l:w})}}),c},o={};E.forEach(e=>{const t=u(e.name,e.hue,e.saturation,"light");Object.assign(o,t)}),v.forEach(e=>{o[e.token]=r(e.token,e.value,"light")}),T.forEach(e=>{o[e.name]=r(e.name,e.lightValue,"light")}),k.forEach(e=>{o[e.name]=r(e.name,e.lightValue,"light")}),y.forEach(e=>{o[e.name]=r(e.name,e.lightValue,"light")}),Object.entries(o).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,t])=>{n+=`  ${e}: ${t};
`}),n+=`}

`;const d={};return E.forEach(e=>{const t=u(e.name,e.hue,e.saturation,"dark");Object.assign(d,t)}),v.forEach(e=>{d[e.token]=r(e.token,e.value,"dark")}),T.forEach(e=>{const t=e.darkValue||e.lightValue;d[e.name]=r(e.name,t,"dark")}),k.forEach(e=>{const t=e.darkValue||e.lightValue;d[e.name]=r(e.name,t,"dark")}),y.forEach(e=>{const t=e.darkValue||e.lightValue;d[e.name]=r(e.name,t,"dark")}),Object.keys(d).length>0&&(n+=`.dark {
`,Object.entries(d).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,t])=>{n+=`  ${e}: ${t};
`}),n+=`}
`),n}function _(h){const n={wex:{}},r=(e,t,s)=>h[s][e]||t,u=(e,t,s,l)=>{const c={},m=`--wex-palette-${e}-500`,x=h[l][m];let f=t,j=s,b=S[500];if(x){const i=L(x);i&&(f=i.h,j=i.s,b=i.l)}return[50,100,200,300,400,500,600,700,800,900].forEach(i=>{const p=`--wex-palette-${e}-${i}`;if(h[l][p])c[p]=h[l][p];else{const w=i===500?b:S[i];c[p]=R({h:f,s:j,l:w})}}),c},o=(e,t,s)=>{const l=t.split(".");let c=e;for(let m=0;m<l.length-1;m++){const x=l[m];(!(x in c)||typeof c[x]!="object"||c[x]===null)&&(c[x]={}),c=c[x]}c[l[l.length-1]]=s},d=(e,t="")=>{E.forEach(s=>{const l=u(s.name,s.hue,s.saturation,e);Object.entries(l).forEach(([c,m])=>{const x=c.replace("--wex-","").replace(/-/g,".");o(n.wex,x+t,{value:m,type:"color"})})}),v.forEach(s=>{const l=r(s.token,s.value,e),c=s.token.replace("--wex-","").replace(/-/g,".");o(n.wex,c+t,{value:l,type:"color"})}),T.forEach(s=>{const l=e==="dark"&&s.darkValue||s.lightValue,c=r(s.name,l,e),m=s.name.replace("--wex-","").replace(/-/g,".");o(n.wex,m+t,{value:c,type:"color"})}),k.forEach(s=>{const l=e==="dark"&&s.darkValue||s.lightValue,c=r(s.name,l,e),m=s.name.replace("--wex-","").replace(/-/g,".");o(n.wex,m+t,{value:c,type:"color"})}),y.forEach(s=>{const l=e==="dark"&&s.darkValue||s.lightValue,c=r(s.name,l,e),m=s.name.replace("--wex-","").replace(/-/g,".");o(n.wex,m+t,{value:c,type:"color"})})};return d("light"),d("dark",".dark"),JSON.stringify(n,null,2)}function K(){const h=U(),{getAllOverrides:n}=J(),r=n(),u=g.useMemo(()=>P(r),[r]),o=g.useMemo(()=>_(r),[r]),d=g.useCallback(()=>{const t=new Blob([u],{type:"text/css"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download="wex-tokens.css",l.click(),URL.revokeObjectURL(s)},[u]),e=g.useCallback(()=>{const t=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download="wex-tokens.json",l.click(),URL.revokeObjectURL(s)},[o]);return a.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-background",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[a.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>h("/theme-builder"),children:[a.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Theme Builder"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Export Theme"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Complete token schema with your customizations applied"})]})]}),a.jsx(A,{cssCode:u,jsonCode:o,onExportCSS:d,onExportJSON:e})]})})}export{K as default};
