@import "./styles/wex.tokens.css";
@import "./styles/wex.shadcn-bridge.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* ============================================================
   SONNER TOAST OVERRIDES
   ============================================================
   Sonner has internal styling with high specificity.
   These overrides ensure proper text contrast for all toast variants.
   Uses semantic tokens only (no raw colors).
   ============================================================ */
@layer components {
  /* Error/Destructive toast - white text on red background */
  [data-sonner-toast][data-type="error"] {
    --normal-bg: hsl(var(--destructive));
    --normal-border: hsl(var(--destructive));
    --normal-text: hsl(var(--destructive-foreground));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="error"] [data-title],
  [data-sonner-toast][data-type="error"] [data-description] {
    color: hsl(var(--destructive-foreground)) !important;
  }

  /* Success toast - white text on green background */
  [data-sonner-toast][data-type="success"] {
    --normal-bg: hsl(var(--success));
    --normal-border: hsl(var(--success));
    --normal-text: hsl(var(--success-foreground));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="success"] [data-title],
  [data-sonner-toast][data-type="success"] [data-description] {
    color: hsl(var(--success-foreground)) !important;
  }

  /* Warning toast - black text on amber background */
  [data-sonner-toast][data-type="warning"] {
    --normal-bg: hsl(var(--warning));
    --normal-border: hsl(var(--warning));
    --normal-text: hsl(var(--warning-foreground));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="warning"] [data-title],
  [data-sonner-toast][data-type="warning"] [data-description] {
    color: hsl(var(--warning-foreground)) !important;
  }

  /* Info toast - white text on blue background */
  [data-sonner-toast][data-type="info"] {
    --normal-bg: hsl(var(--info));
    --normal-border: hsl(var(--info));
    --normal-text: hsl(var(--info-foreground));
    background: var(--normal-bg) !important;
    border-color: var(--normal-border) !important;
    color: var(--normal-text) !important;
  }
  [data-sonner-toast][data-type="info"] [data-title],
  [data-sonner-toast][data-type="info"] [data-description] {
    color: hsl(var(--info-foreground)) !important;
  }
}

/* ============================================================
   MESH ANIMATIONS
   ============================================================ */
@keyframes mesh-drift {
  0% { transform: translate(0, 0) rotate(0deg) scale(1); }
  33% { transform: translate(15%, -10%) rotate(10deg) scale(1.1); }
  66% { transform: translate(-10%, 15%) rotate(-10deg) scale(0.9); }
  100% { transform: translate(0, 0) rotate(0deg) scale(1); }
}

.animate-mesh {
  animation: mesh-drift 25s infinite ease-in-out;
  will-change: transform;
}

.animate-mesh-slow {
  animation: mesh-drift 35s infinite reverse ease-in-out;
  will-change: transform;
}

.animate-mesh-delayed {
  animation: mesh-drift 30s infinite 2s ease-in-out;
  will-change: transform;
}

/* ============================================================
   PRISM SYNTAX HIGHLIGHTING OVERRIDES
   WEX Design System themed - adapts to light/dark mode
   ============================================================ */

/* Base code styling */
pre[class*="language-"],
code[class*="language-"] {
  background: transparent !important;
  text-shadow: none !important;
  color: hsl(var(--foreground));
}

/* Comments - muted */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: hsl(var(--muted-foreground));
  font-style: italic;
}

/* Punctuation - subtle foreground */
.token.punctuation {
  color: hsl(var(--muted-foreground));
}

/* Properties, tags, numbers - primary blue */
.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: hsl(var(--primary));
}

/* Strings, inserted - success green */
.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: hsl(var(--success));
}

/* Operators, entities - foreground */
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: hsl(var(--foreground));
}

/* Keywords - destructive/brand red */
.token.atrule,
.token.attr-value,
.token.keyword {
  color: hsl(var(--brand-red));
}

/* Functions, class names - info blue/cyan */
.token.function,
.token.class-name {
  color: hsl(var(--info));
}

/* Regex, variables - warning amber */
.token.regex,
.token.important,
.token.variable {
  color: hsl(var(--warning));
}
